<!DOCTYPE html>
<html>
<head>
  <title>Barcode Scanner</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <video id="video" width="100%" height="100%"></video>
  <button id="toggle-flash-button">Toggle Flash</button>

  <script src="https://unpkg.com/@zxing/library@0.26.1"></script>
  <script>
    // Create a new instance of the barcode reader
    var codeReader = new ZXing.BrowserBarcodeReader();

    // Get a reference to the video element
    var video = document.getElementById('video');

    // Get a reference to the toggle flash button
    var toggleFlashButton = document.getElementById('toggle-flash-button');

    // Get a reference to the stream object
    var stream = null;

    // Check if the device has a camera and if it supports flash
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ 
        video: { 
          facingMode: "environment", // use the back camera
          torch: false // disable the flash initially
        } 
      })
      .then(function(mediaStream) {
        // Store the stream object
        stream = mediaStream;

        // Attach the stream to the video element
        video.srcObject = stream;

        // Start scanning for barcodes
        codeReader.decodeFromVideoDevice(null, 'video', function(result) {
          alert(result.text);
        });
      })
      .catch(function(error) {
        console.error(error);
      });
    }

    // Add a click event listener to the toggle flash button
    toggleFlashButton.addEventListener('click', function() {
      // Get the video track from the stream
      var videoTrack = stream.getVideoTracks()[0];

      // Toggle the flash
      videoTrack.applyConstraints({
        advanced: [{torch: !videoTrack.getSettings().torch}]
      });
    });
  </script>
</body>
</html>